# Создание Redis-сервера

Создадим Redis-сервер в докере, предварительно пробросив порты:
![docker](pics/1-docker.png)

# Работа с json: строка, hset, zset, list

Подключимся к серверу, используя python api:
![python-api](pics/6-connect.png)

Загрузим большой json (26MB) на сервер.
Далее выполним различные команды по вставке и чтению:
![hset](pics/7-hset.png)
![zset](pics/8-zset.png)
![list](pics/9-list.png)

# Настройка кластера

После работы с сервером можем настроить кластер. Для учебных целей достаточно 6 нод (3 master и 3 slave), однако на практике обычно используют 9 нод в данном случае, дабы избежать split-brain issue (когда каждая нода считает себя главной).

Итак, создадим множество контейнеров с redis-server:
![many-dockers](pics/2-many-dockers.png)

Далее в каждом контейнере сделаем конфиг для ноды:
![cfg](pics/5-node-cfg.png)

Запустим 6 redis серверов:
![node](pics/3-node.png)

Далее объединяем ноды в кластер:
![cluster](pics/4-cluster-join.png)

Проверим кластер на прочность, отключив одну мастер-ноду:
![fail](pics/10-sync.png)
Как видим, сервер не упал и после произошла синхронизация.
